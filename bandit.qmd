---
title: Bandits
---

```{r}
library(tidyverse)

theme_set(theme_minimal())

run_simulation <- function (params, output) {
  system(paste("./target/release/bandit", params, ">", output))
  
  bandit_data <- read_csv(output, show_col_types = FALSE) |>
    mutate(run = row_number())
  
  probs <- bandit_data |>
    pivot_longer(cols = starts_with("bandit_"), names_to = "bandit", values_to = "p") |>
    ggplot(aes(x = run, y = p, color = bandit)) +
    geom_line(linewidth = 0.75) +
    labs(
      title = "Learned Probabilities",
      x = "Run Number",
      y = "Probability of Success"
    )

  regret <- bandit_data |>
    ggplot(aes(x = run, y = regret)) +
    geom_line(linewidth = 0.75) + 
    labs(
      title = "Regret over Time",
      x = "Run Number",
      y = "Regret"
    )
  
  print(probs)
  print(regret)
}
```


```{r}
run_simulation("0.21 0.24 0.22 0.21 0.19 0.25 0.215 0.2 0.15 0.22 50000 constant", "bandits.csv")
```